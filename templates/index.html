{% extends 'base.html' %}
{% load static %}
{% load my_filters %}
{% block head %}
<link href="{% static 'css/calendar.css' %}" rel="stylesheet">
<style type="text/css">
ul, ol, li {
	list-style: none;
	padding: 0;
	margin: 0;
}
</style>
{#弹窗#}
<link rel="stylesheet" href="{% static 'js/jconfirm/jquery-confirm.min.css' %}">
{% endblock head %}


{% block content %}
    <div class="row">
    <div class="card">
        <div class="card-header">
            {% if nowtime %}
            <h4>查询数据：<a href="javascript:void(0)" id="setdate">{{ nowtime }}</a></h4>
            {% else %}
            <h4>最新数据：<a href="javascript:void(0)" id="setdate">{{ newday.date }}</a></h4>
            {% endif %}
        </div>
        <div class="card-body" id="header">
            <div class="col-xs-4 col-md-2 col-sm-3"><p>K线形态<label class="lyear-switch switch-primary"><input type="checkbox" value="K线"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>日均线<label class="lyear-switch switch-primary"><input type="checkbox" value="日均线"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>交易量<label class="lyear-switch switch-primary"><input type="checkbox" id="交易量"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>MACD<label class="lyear-switch switch-primary"><input type="checkbox" id="MACD"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>KDJ<label class="lyear-switch switch-primary"><input type="checkbox" id="KDJ"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>布林线<label class="lyear-switch switch-primary"><input type="checkbox" id="BOLL"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>换手率<label class="lyear-switch switch-primary"><input type="checkbox" id="换手率"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>市盈/净/销<label class="lyear-switch switch-primary"><input type="checkbox" id="市盈/净/销"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>流通市值<label class="lyear-switch switch-primary"><input type="checkbox" id="市值"><span></span> </label> </p></div>
            <div class="col-xs-4 col-md-2 col-sm-3"><p>融资融券<label class="lyear-switch switch-primary"><input type="checkbox" id="融资融券"><span></span> </label> </p></div>
            <p><br/><br/><br/><br/></p>
        </div>
    </div>
    <div id="dd"></div>
{#    我的策略部分#}
    {% if celielist %}{% if celielist|length > 0 %}
        <div class="card">
        <div class="card-header">
            <h4>我的策略</h4>
        </div>
        <div class="card-body" id="mycelve">
            {% for i in celielist %}
                {% if i.shanchu %}
                <button type="button" class="btn {% cycle 'btn-primary' 'btn-brown' 'btn-cyan' 'btn-danger' 'btn-warning'%}" name="{{ i.celve.clcode }}" title="{{ i.celve.clname }}" value="{{ i.id }}">{{ i.clname }}</button>
                {% endif %}
            {% endfor %}
        </div>
        </div>
    {% endif %}{% endif %}

    <div class="card" id="chaxun" style="display: none;">
        <div class="card-body">
            <form action="/chaxun/" method="post" class="form-horizontal"  enctype="multipart/form-data">
                {% csrf_token %}
                {% if nowtime %}
                    <input type="hidden" name="newtime" value="{{ nowtime }}">
                {% else %}
                    <input type="hidden" name="newtime" value="{{ newday.date }}">
                {% endif %}
                <div class="form-group col-xs-12" id="chekc-1" style="display: none;">
                    <h4><strong>K线形态</strong></h4>
                    <div>
                        <label >当天</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="1-1" value="当天上涨">上涨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-2" value="当天下跌">下跌</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-3" value="当天阳线">阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-4" value="当天阴线">阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-5" value="当天高开">高开</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-6" value="当天低开">低开</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-7" value="当天大阳线">大阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-8" value="当天中阳线">中阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-9" value="当天小阳线">小阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-10" value="当天大阴线">大阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-11" value="当天中阴线">中阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-12" value="当天小阴线">小阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-13" value="当天光头阳线">光头阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-14" value="当天光脚阳线">光脚阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-15" value="当天光头阴线">光头阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-16" value="当天光脚阴线">光脚阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-17" value="当天十字星">十字星</label>
                        </br></br>
                        <label >前一天</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-1" value="前一天上涨">上涨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-2" value="前一天下跌">下跌</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-3" value="前一天阳线">阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-4" value="前一天阴线">阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-5" value="前一天高开">高开</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-6" value="前一天低开">低开</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-7" value="前一天大阳线">大阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-8" value="前一天中阳线">中阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-9" value="前一天小阳线">小阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-10" value="前一天大阴线">大阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-11" value="前一天中阴线">中阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-12" value="前一天小阴线">小阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-13" value="前一天光头阳线">光头阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-14" value="前一天光脚阳线">光脚阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-15" value="前一天光头阴线">光头阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-16" value="前一天光脚阴线">光脚阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d1-1-17" value="前一天十字星">十字星</label>
                        </br></br>
                        <label >前两天</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-1" value="前二天上涨">上涨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-2" value="前二天下跌">下跌</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-3" value="前二天阳线">阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-4" value="前二天阴线">阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-5" value="前二天高开">高开</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-6" value="前二天低开">低开</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-7" value="前二天大阳线">大阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-8" value="前二天中阳线">中阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-9" value="前二天小阳线">小阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-10" value="前二天大阴线">大阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-11" value="前二天中阴线">中阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-12" value="前二天小阴线">小阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-13" value="前二天光头阳线">光头阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-14" value="前二天光脚阳线">光脚阳线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-15" value="前二天光头阴线">光头阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-16" value="前二天光脚阴线">光脚阴线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="d2-1-17" value="前二天十字星">十字星</label>
                        </br></br>
                        <label >其他</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="1-18" value="3连阳">3连阳</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-19" value="5连阳">5连阳</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-20" value="7连阳">7连阳</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-21" value="3连阴">3连阴</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-22" value="5连阴">5连阴</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-23" value="7连阴">7连阴</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-24" value="3连涨">3连涨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-25" value="5连涨">5连涨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-26" value="7连涨">7连涨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-27" value="3连跌">3连跌</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-28" value="5连跌">5连跌</label>
                        <label class="checkbox-inline"><input type="checkbox" name="1-29" value="7连跌">7连跌</label>
                        <HR>
                    </div>
                </div>
                <div class="form-group col-xs-12" id="chekc-2" style="display: none;">
                    <h4><strong>日均线</strong></h4>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="2-1" value="5日线高于10日线">5日线高于10日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-2" value="5日线高于20日线">5日线高于20日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-3" value="10日线高于20日线">10日线高于20日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-16" value="5日线低于10日线">5日线低于10日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-17" value="5日线低于20日线">5日线低于20日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-18" value="10日线低于20日线">10日线低于20日线</label></br></br>
                        <label class="checkbox-inline"><input type="checkbox" name="2-4" value="K线在5日线上方">K线在5日线上方</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-5" value="K线在10日线上方">K线在10日线上方</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-6" value="K线在20日线上方">K线在20日线上方</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-7" value="K线在5日线下方">K线在5日线下方</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-8" value="K线在10日线下方">K线在10日线下方</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-9" value="K线在20日线下方">K线在20日线下方</label></br></br>
                        <label class="checkbox-inline"><input type="checkbox" name="2-10" value="5日线向上穿过10日线">5日线向上穿过10日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-11" value="5日线向上穿过20日线">5日线向上穿过20日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-12" value="10日线向上穿过20日线">10日线向上穿过20日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-13" value="5日线向下穿过10日线">5日线向下穿过10日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-14" value="5日线向下穿过20日线">5日线向下穿过20日线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-15" value="10日线向下穿过20日线">10日线向下穿过20日线</label></br></br>
                        <label class="checkbox-inline"><input type="checkbox" name="2-19" value="5日线5天波动3%">5日线5天波动不超过3%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-20" value="5日线10天波动5%">5日线10天波动不超过5%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="2-21" value="5日线20天波动10%">5日线20天波动不超过10%</label>
                        <HR>
                    </div>
                </div>
                <div class="form-group  col-xs-12" id="chekc-3" style="display: none;">
                    <h4><strong>交易量</strong></h4>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="3-1" value="交易量翻倍">较前一日翻倍以上</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-2" value="交易量一半">较前一日低一半以上</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-3" value="比前5天平均值高一倍">比前5天的平均值高一倍</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-4" value="比前5天平均值低一半">比前5天的平均值低一半</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-5" value="比前20天平均值高一倍">比前20天的平均值高一倍</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-6" value="比前20天平均值低一半">比前20天的平均值低一半</label></br></br>
                        <label class="checkbox-inline"><input type="checkbox" name="3-7" value="交易量连续3增加">连续3日增加</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-8" value="交易量连续3减小">连续3日减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-9" value="交易量连续5增加">连续5日增加</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-10" value="交易量连续5减小">连续5日减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-11" value="交易量连续3增加后减小">连续3日增加后减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-12" value="交易量连续3减小后增加">连续3日减小后增加</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-13" value="交易量连续5增加后减小">连续5日增加后减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="3-14" value="交易量连续5减小后增加">连续5日减小后增加</label></br></br>
                        <HR>
                    </div>
                </div>
                <div class="form-group  col-xs-12" id="chekc-4" style="display: none;">
                    <h4><strong>MACD</strong></h4>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="4-1" value="MACD金叉">金叉</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-2" value="MACD死叉">死叉</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-3" value="DIF>DEA">快线高于慢线</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-4" value="DIF<DEA">快线低于慢线</label>
                        </br></br>
                        <label class="checkbox-inline"><input type="checkbox" name="4-5" value="MACD连续3增加">MACD连续3日增加</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-6" value="MACD连续3减小">MACD连续3日减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-7" value="MACD连续5增加">MACD连续5日增加</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-8" value="MACD连续5减小">MACD连续5日减小</label>
                        </br></br>
                        <label class="checkbox-inline"><input type="checkbox" name="4-9" value="MACD连续3增加后减小">MACD连续3日增加之后减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-10" value="MACD连续3减小后增加">MACD连续3日减小之后增加</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-11" value="MACD连续3增加后减小2">MACD连续3日增加之后减小2日</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-12" value="MACD连续3减小后增加2">MACD连续3日减小之后增加2日</label>
                        </br></br>
                        <label class="checkbox-inline"><input type="checkbox" name="4-13" value="MACD连续5增加后减小">MACD连续5日增加之后减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-14" value="MACD连续5减小后增加">MACD连续5日减小之后增加</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-15" value="MACD连续5增加后减小2">MACD连续5日增加之后减小2日</label>
                        <label class="checkbox-inline"><input type="checkbox" name="4-16" value="MACD连续5减小后增加2">MACD连续5日减小之后增加2日</label>
                        <HR>
                    </div>
                </div>
                <div class="form-group col-xs-12" id="chekc-5" style="display: none;">
                    <h4><strong>KDJ</strong></h4>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="5-1" value="KDJ金叉">金叉</label>
                        <label class="checkbox-inline"><input type="checkbox" name="5-2" value="KDJ死叉">死叉</label>
                        <label class="checkbox-inline"><input type="checkbox" name="5-3" value="D大于80(超买)">D大于80(超买)</label>
                        <label class="checkbox-inline"><input type="checkbox" name="5-4" value="D小于20(超卖)">D小于20(超卖)</label>
                        <label class="checkbox-inline"><input type="checkbox" name="5-5" value="D大于50">D大于50</label>
                        <label class="checkbox-inline"><input type="checkbox" name="5-6" value="D小于50">D小于50</label>
                        <label class="checkbox-inline"><input type="checkbox" name="5-7" value="K大于J">K大于J</label>
                        <label class="checkbox-inline"><input type="checkbox" name="5-8" value="J大于K">J大于K</label>
                        <HR>
                    </div>
                </div>
                <div class="form-group  col-xs-12" id="chekc-6" style="display: none;">
                    <h4><strong>布林线</strong></h4>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="6-1" value="股价穿过中轨">股价穿过中轨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-3" value="股价在中轨上面">股价在中轨上面</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-4" value="股价在中轨下面">股价在中轨下面</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-5" value="触及上轨">股价触及上轨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-6" value="触及下轨">股价触及下轨</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-7" value="布林线连续3日收缩">连续3日收缩</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-8" value="布林线连续3日扩大">连续3日扩大</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-9" value="布林线连续5日收缩">连续5日收缩</label>
                        <label class="checkbox-inline"><input type="checkbox" name="6-10" value="布林线连续5日扩大">连续5日扩大</label>
                        <HR>
                    </div>
                </div>
                <div class="form-group  col-xs-12" id="chekc-7" style="display: none;">
                    <h4><strong>换手率</strong></h4>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="7-1" value="换手率小于0.5%">小于0.5%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-2" value="换手率大于0.5%">大于0.5%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-3" value="换手率小于1%">小于1%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-4" value="换手率大于1%">大于1%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-5" value="换手率小于3%">小于3%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-6" value="换手率大于3%">大于3%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-7" value="换手率小于7%">小于7%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-8" value="换手率大于7%">大于7%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-9" value="换手率小于10%">小于10%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="7-10" value="换手率大于10%">大于10%</label>
                        <HR>
                    </div>
                </div>
                <div class="form-group col-xs-12" id="chekc-8" style="display: none;">
                    <h4><strong>市（盈、净、销）率</strong></h4>
                    <div>
                        <label >市盈率（PE）</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-1" value="市盈率小于5">小于5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-2" value="市盈率大于5">大于5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-3" value="市盈率小于13">小于13</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-4" value="市盈率大于13">大于13</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-5" value="市盈率小于20">小于20</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-6" value="市盈率大于20">大于20</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-7" value="市盈率小于28">小于28</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-8" value="市盈率大于28">大于28</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-9" value="市盈率小于40">小于40</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-10" value="市盈率大于40">大于40</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-11" value="市盈率小于80">小于80</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-1-12" value="市盈率大于80">大于80</label>

                        </br></br>
                        <label >市净率（PB）</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-1" value="市净率小于1">小于1</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-2" value="市净率大于1">大于1</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-3" value="市净率小于1.5">小于1.5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-4" value="市净率大于1.5">大于1.5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-5" value="市净率小于2">小于2</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-6" value="市净率大于2">大于2</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-7" value="市净率小于3">小于3</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-8" value="市净率大于3">大于3</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-9" value="市净率小于5">小于5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-10" value="市净率大于5">大于5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-11" value="市净率小于10">小于10</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-2-12" value="市净率大于10">大于10</label>
                        </br></br>
                        <label >市销率（PS）</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-1" value="市销率小于0.5">小于0.5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-2" value="市销率大于0.5">大于0.5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-3" value="市销率小于1">小于1</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-4" value="市销率大于1">大于1</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-5" value="市销率小于2">小于2</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-6" value="市销率大于2">大于2</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-7" value="市销率小于3">小于3</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-8" value="市销率大于3">大于3</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-9" value="市销率小于5">小于5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-10" value="市销率大于5">大于5</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-11" value="市销率小于10">小于10</label>
                        <label class="checkbox-inline"><input type="checkbox" name="8-3-12" value="市销率大于10">大于10</label>
                        </br></br>
                        <HR>
                    </div>
                </div>
                <div class="form-group  col-xs-12" id="chekc-9" style="display: none;">
                    <h4><strong>流通市值</strong></h4>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="9-1" value="流通市值小于12亿">小于12亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-2" value="流通市值大于12亿">大于12亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-3" value="流通市值小于20亿">小于20亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-4" value="流通市值大于20亿">大于20亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-5" value="流通市值小于50亿">小于50亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-6" value="流通市值大于50亿">大于50亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-7" value="流通市值小于100亿">小于100亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-8" value="流通市值大于100亿">大于100亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-9" value="流通市值小于300亿">小于300亿</label>
                        <label class="checkbox-inline"><input type="checkbox" name="9-10" value="流通市值大于300亿">大于300亿</label>
                        <HR>
                    </div>
                </div>
                <div class="form-group  col-xs-12" id="chekc-10" style="display: none;">
                    <h4><strong>融资融券</strong></h4><p>已更新到：{{ rongday.date }}（融资融券数据需要第二天早上9点15之后才会更新，<b>未更新勿选</b>）</p>
                    <label >融资余额占流通市值比值</label></br>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="10-1" value="融资占比小于1%">小于1%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-2" value="融资占比大于1%">大于1%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-3" value="融资占比小于3%">小于3%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-4" value="融资占比大于3%">大于3%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-5" value="融资占比小于5%">小于5%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-6" value="融资占比大于5%">大于5%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-7" value="融资占比小于7%">小于7%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-8" value="融资占比大于7%">大于7%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-9" value="融资占比小于10%">小于10%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-10" value="融资占比大于10%">大于10%</label>
                        <HR>
                    </div>
                    <label >当日融资净增长占流动市值比例(融资买入多于卖出时，多出部分资金占市值的比例）</label></br>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="10-11" value="融资净长占比小于0.01%">小于0.01%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-12" value="融资净长占比大于0.01%">大于0.01%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-13" value="融资净长占比小于0.05%">小于0.05%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-14" value="融资净长占比大于0.05%">大于0.05%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-15" value="融资净长占比小于0.1%">小于0.1%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-16" value="融资净长占比大于0.1%">大于0.1%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-17" value="融资净长占比小于0.5%">小于0.5%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-18" value="融资净长占比大于0.5%">大于0.5%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-19" value="融资净长占比小于1%">小于1%</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-20" value="融资净长占比大于1%">大于1%</label>
                        <HR>
                    </div>
                    <label >其他</label></br>
                    <div>
                        <label class="checkbox-inline"><input type="checkbox" name="10-21" value="融资连续3日净增长">融资连续3日净增长</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-22" value="融资连续3日净减小">融资连续3日净减小</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-23" value="融资连续5日净增长">融资连续5日净增长</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-24" value="融资连续5日净增长">融资连续5日净减小</label></br>
                        <label class="checkbox-inline"><input type="checkbox" name="10-25" value="融券连续3日净卖出">融券连续3日净卖出</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-26" value="融券连续3日净买入">融券连续3日净买入</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-27" value="融券连续5日净卖出">融券连续5日净卖出</label>
                        <label class="checkbox-inline"><input type="checkbox" name="10-28" value="融券连续5日净买入">融券连续5日净买入</label>
                        <HR>
                    </div>
                </div>
                <div id="查询按钮" style="display: none;">
                    <button class='btn btn-w-md btn-round btn-primary'>确认查询</button>
                    {% if username %}
                    <button id='储存' class='btn btn-w-md btn-round btn-info'>储存策略</button>
                    {% endif %}
                </div>
            </form>
        </div>
    </div>
    <div id="查询结果">
    {% if chaxun %}
    <div class="card">
        <div class="card-header">
            <h4>查询结果</h4>
        </div>
        <div class="card-actions">查询时间：{{ nowtime }}&ensp;&ensp;{% if lenjieguo > 100 %}<p>一共{{ lenjieguo }}个结果（只显示100个）</p>{% else %}<p>一共{{ lenjieguo }}个结果</p>{% endif %}</div>
        <div class="card-body">
            {% for i in allname %}
            <span class="label {% cycle 'label-brown' 'label-cyan' 'label-danger' 'label-dark' 'label-info' 'label-primary' 'label-purple' 'label-secondary' 'label-success' 'label-warning' %}">{{ i }}</span>
            {% endfor %}
            <hr>
        {% if jieguo|length > 0%}
            <div class="table-responsive">
            {% if tablelist %}
            <table class="table table-bordered stripe">
            <thead><th>股票名称</th><th>股票代码</th>{% for col in tablelist %}<th>{{ col }}</th>{% endfor %}</thead>
                <tbody>
                {% for ii in jieguo %}
                <tr>
                    <td>{{ ii.code.codename }}</td>
                    <td>{{ ii.code.code|slice:"3:" }}</td>
                    {% for col in tablelist %}
                    <td>{{ ii|shuchu:col }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
                </tbody>
            </table>
            {% else %}
            <table class="table table-bordered stripe">
            <thead><th>股票名称</th><th>股票代码</th><th>收盘价</th><th>交易量(万)</th><th>量比</th><th>换手率</th><th>市盈率</th><th>市值(亿)</th></thead>
                <tbody>
                {% for ii in jieguo %}
                <tr>
                    <td>{{ ii.code.codename }}</td>
                    <td>{{ ii.code.code|slice:"3:" }}</td>
                    <td>{{ ii.close|floatformat:2 }}</td>
                    <td>{{ ii.volume|yiwan }}</td>
                    <td>{{ ii.volume_ratio|floatformat:2 }}</td>
                    <td>{{ ii.turn|floatformat:2 }}%</td>
                    <td>{{ ii.pe|floatformat:1 }}</td>
                    <td>{{ ii.circ_mv|yiwan }}</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}

            </div>
        {% else %}
            <p>{{ nowtime }}没有满足以上条件的股票</p>
        {% endif %}
        </div>
    {% endif %}
    </div>
    </div>




    </div>

{% endblock content %}

{% block cutsom_js %}
<script type="text/javascript" src="{% static 'js/calendar.js' %}"></script>
<script>
$(function () {
    daylist = {{ allday|safe }};
    alldata = [];
    for (i=0;i<daylist.length;i++){
        if(daylist[i]['fields']['isover'] == false){}else {
            alldata.push({date:daylist[i]['fields']['date'],value:'1'})
        }
    };
    $('#dd').calendar({
        trigger: '#setdate',
        zIndex: 999,
		format: 'yyyy-mm-dd',
        data:alldata,
        onClose: function (view, date, data) {
            if(data==1) {
                var newtime = date.format("yyyy年mm月dd日");
                $('#setdate').text(newtime);
                $("input[name='newtime']").val(newtime);
            }else {
                $.alert({title: '无数据',content:'请选择‘绿点’日期',buttons: {cancel: {text:'确定',btnClass: 'btn-primary',action:function(){}}}})
            }
        }
    });
    var gaodu=$('#setdate').position().top;
    var zonghe = $('#dd').height();
    var xiaohe = $('#dd').find('.calendar-hd').height();
    $('#dd').css('top',gaodu+30).height(zonghe+20).find('.calendar-hd').height(xiaohe+10);
})
$(function () {
    $('#header>div').find('input').click(function () {
        if($(this).prop('checked')){
            var weizhi=$(this).parent().parent().parent().index();
            $('#chaxun').show();
            $('#查询按钮').show();
            $('.form-group').eq(weizhi).show();
        }else {
            var weizhi = $(this).parent().parent().parent().index();
            $('.form-group').eq(weizhi).hide().find('input').prop('checked', false);
            if ($('#header>div input:checked').length == 0) {$('#chaxun').hide();$('#查询按钮').hide();}}
    })
});
{#$(function () {#}
{#    if ($(window).width()<800){#}
{#        $('.table-bordered>thead>tr>th').eq(3).remove();#}
{#        var alllist=$('.table-bordered>tbody>tr');#}
{#        for (i=0;alllist.length>i;i++){$(alllist[i]).find('td').eq(3).remove()};#}
{#        $('.table-bordered>thead>tr>th').eq(3).remove();#}
{#        var alllist=$('.table-bordered>tbody>tr');#}
{#        for (i=0;alllist.length>i;i++){$(alllist[i]).find('td').eq(3).remove()};#}
{#    };});#}
</script>
{% if username %}
<script src= "{% static "js/jconfirm/jquery-confirm.min.js" %}"></script>
{#以下是为了jQ使用cookie#}
<script>
jQuery(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
});

$.ajaxSetup({
  data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
});
</script>

<script type="text/javascript">
$('#储存').click(function () {
    var alllist={};
    var bianliang=$('#chaxun').find('input:checked');
    if (bianliang.length==0){
        $.alert({title: '无选项',content:'请选择策略再保存',buttons: {cancel: {text:'确定',btnClass: 'btn-primary',action:function(){}}}})
    }else{
        for (i=0;i<bianliang.length;i++){
            alllist[$(bianliang[i]).prop('name')]=$(bianliang[i]).prop('value')
        };
        var nr='';
        for (i in alllist){nr+=alllist[i]+'</br>'};

        $.confirm({
            title: '即将保存以下组合',
            content: '' +
            '<form action="" class="formName">'+
            '<div class="form-group">' +
            '<label>'+nr+'</label>' +
            '<input type="text" placeholder="请输入策略的名称" class="name form-control" required />' +
            '</div>' +
            '</form>',
            buttons: {
                formSubmit: {
                    text: '提交',
                    btnClass: 'btn-blue',
                    action: function () {
                        var name = this.$content.find('.name').val();
                        if(!name){
                            $.alert('请输入名称');
                            return false;
                        };
                        $.post('/chuchun/',{'data':alllist,'name':name},function (fanhui) {
                            $.alert({title:'',content:fanhui,buttons: {cancel: {text:'确定',btnClass: 'btn-primary',action:function(){location.reload()}}}})
                        })

                    }
                },
                cancel: {
                    text: '取消'
                },
            },
            onContentReady: function () {
                var jc = this;
                this.$content.find('form').on('submit', function (e) {
                    e.preventDefault();
                    jc.$$formSubmit.trigger('click');
                });
            }
        });
    };
return false;
});
</script>
{% endif %}
<script>
$(function () {
    $('#mycelve').find('button').click(function () {
        var clcode=this.name;
        var clname=this.title;
        var clid=this.value;
        var nowtime=$('#setdate').text();
        $.post('/clchaxun/',{'clcode':clcode,'clname':clname,'nowtime':nowtime,'clid':clid},function (re) {
            $('#查询结果').html(re);
            $(document).ready(function(){
                $('.table').dataTable({
                    "searching": false,  //是否允许Datatables开启本地搜索
                    "paging": false,  //是否开启本地分页
                    "lengthChange": false,  //是否允许用户改变表格每页显示的记录数
                    "info": false,   //控制是否显示表格左下角的信息
                    "columnDefs": [{
                        "targets": 'nosort',  //列的样式名
                        "orderable": false    //包含上样式名‘nosort’的禁止排序
                    }],
                    //跟数组下标一样，第一列从0开始，这里表格初始化时，第四列默认降序
                    "order": [[1,'asc']]  //asc升序   desc降序  "order": [[ 3, "desc" ]]默认第四列为降序排列
                });
            });
        });
        return false;
    })
})
</script>

{#<!-- DataTables CSS -->#}
<link rel="stylesheet" href="{% static "DataTables-1.10.21/media/css/jquery.dataTables.min.css" %}">
{#<!-- DataTables -->#}
<script type="text/javascript" charset="utf8" src="{% static 'DataTables-1.10.21/media/js/jquery.dataTables.js' %}"></script>



<script>
$(document).ready(function(){
    $('.table').dataTable({
        "searching": false,  //是否允许Datatables开启本地搜索
        "paging": false,  //是否开启本地分页
        "lengthChange": false,  //是否允许用户改变表格每页显示的记录数
        "info": false,   //控制是否显示表格左下角的信息
        "columnDefs": [{
            "targets": 'nosort',  //列的样式名
            "orderable": false    //包含上样式名‘nosort’的禁止排序
        }],
        //跟数组下标一样，第一列从0开始，这里表格初始化时，第四列默认降序
        "order": [[1,'asc']]  //asc升序   desc降序  "order": [[ 3, "desc" ]]默认第四列为降序排列
    });
});
</script>
{% endblock cutsom_js %}